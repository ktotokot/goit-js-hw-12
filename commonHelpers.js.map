{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/icon-close.svg","../src/main.js"],"sourcesContent":["export function imagesTamplate(arr) {\n  return arr.map(imageTemplate).join('\\n');\n}\n\nexport function imageTemplate(el) {\n  return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n          <div class=\"gallery-image-thumb\">\n            <img class=\"gallery-image\" src=\"${el.webformatURL}\" alt=\"${el.tags}\" />\n          </div>\n          <ul class=\"property\">\n            <li class=\"property__item\">\n              <p class=\"property__name\">Likes</p>\n              <p class=\"item-prop__quantity\">${el.likes}</p>\n            </li>\n            <li class=\"property__item\">\n              <p class=\"property__name\">Views</p>\n              <p class=\"item-prop__quantity\">${el.views}</p>\n            </li>\n            <li class=\"property__item\">\n              <p class=\"property__name\">Comments</p>\n              <p class=\"item-prop__quantity\">${el.comments}</p>\n            </li>\n            <li class=\"property__item\">\n              <p class=\"property__name\">Downloads</p>\n              <p class=\"item-prop__quantity\">${el.downloads}</p>\n            </li>\n          </ul>\n        </a>\n      </li>`;\n}\n\nexport function addLoader(loader) {\n  loader.classList.remove('loader-hidden');\n}\n\nexport function removeLoader(loader) {\n  loader.classList.add('loader-hidden');\n}","\n\nimport axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getImages(imageName, page = 1) {\n  const params = {\n    key: '44349742-ecc8a7b60aea5585f0c207813',\n    q: imageName,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  };\n  try {\n    const res = await axios.get('', { params });\n    return res.data;\n  } catch (err) {\n    console.log(err);\n  }\n}","export default \"__VITE_ASSET__e36160dc__\"","import {\n  imagesTamplate,\n  imageTemplate,\n  addLoader,\n  removeLoader,\n} from './js/render-functions.js';\n\nimport { getImages } from './js/pixabay-api.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iconClose from './img/icon-close.svg';\n\n\nconst formEl = document.querySelector('.search-form');\nconst ulEl = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more_button');\n\nlet page = 1;\nlet query = '';\nlet totalHits = 0;\n\nlet simpleGallery = new SimpleLightbox('.gallery-link', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\nsimpleGallery.on('error.simplelightbox', function (e) {\n    console.log(e); \n});\n\n\nfunction showToast(message) {\n    iziToast.show({\n        class: 'izt-toast-message',\n        message: message,\n        messageSize: '12',\n        messageLineHeight: '24',\n        iconUrl: iconClose,\n        messageColor: '#ffffff',\n        backgroundColor: '#b51b1b',\n        position: 'topRight',\n        theme: 'dark',\n        timeout: 2000\n    });\n}\n\n\nfunction smoothScroll() {\n    const cardHeight = ulEl.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\n\nasync function fetchImages() {\n    try {\n      addLoader(loader);\n        const data = await getImages(query, page);\n        totalHits = data.totalHits;\n        \n        if (data.hits.length === 0) {\n            ulEl.innerHTML = '';\n            showToast('Sorry, there are no images matching your search query. Please try again!');\n        } else {\n            const markup = imagesTamplate(data.hits);\n            ulEl.innerHTML = markup;\n            simpleGallery.refresh();\n            if (data.hits.length < totalHits) {\n                loadMoreBtn.classList.remove('hidden');\n            } else {\n                loadMoreBtn.classList.add('hidden');\n                showToast(\"We're sorry, but you've reached the end of search results.\");\n            }\n        }\n    } catch (err) {\n        console.log(\"Error\", err);\n        showToast('There was an error loading images. Try again later!');\n    } finally {\n      removeLoader(loader);\n        formEl.reset();\n    }\n}\n\n\nformEl.addEventListener('submit', e => {\n    e.preventDefault();\n    query = e.target.elements.query.value.trim();\n    page = 1;\n\n    if (!query) {\n        return;\n    }\n\n    loadMoreBtn.classList.add('hidden');\n    fetchImages();\n});\n\n\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    try {\n      addLoader(loader);\n        const data = await getImages(query, page);\n        const markup = imagesTamplate(data.hits);\n        ulEl.insertAdjacentHTML('beforeend', markup);\n        simpleGallery.refresh();\n        smoothScroll();\n        if ((page * 15) >= totalHits) {\n            loadMoreBtn.classList.add('hidden');\n            showToast(\"We're sorry, but you've reached the end of search results.\");\n        }\n    } catch (err) {\n        console.log(\"Error\", err);\n        showToast('There was an error loading images. Try again later!');\n    } finally {\n      removeLoader(loader);\n    }\n}); "],"names":["imagesTamplate","arr","imageTemplate","el","addLoader","loader","removeLoader","axios","getImages","imageName","page","params","err","iconClose","formEl","ulEl","loadMoreBtn","query","totalHits","simpleGallery","SimpleLightbox","showToast","message","iziToast","smoothScroll","cardHeight","fetchImages","data","markup"],"mappings":"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"}